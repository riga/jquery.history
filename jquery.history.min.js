/*!
 * jQuery History Plugin v0.2
 * https://github.com/riga/jquery.history
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _history={instance:null,callbacks:jQuery.Callbacks()};jQuery.History=function(j,a){if(j){a=a===undefined?true:a;j=j||function(){};if(a){_history.callbacks.add(j.fire||j)}else{_history.callbacks=j.fire?j:jQuery.Callbacks().add(j)}}if(_history.instance){return _history.instance}var k,h=function(m,n){if(!jQuery.isPlainObject(m)){m=jQuery.extend(true,{url:m},n)}n=m;window.history.pushState(n,"",encodeURI(n.url));g().fire(n);return k},i=function(m,n){if(n===undefined||n){m=jQuery.extend(true,c(),m)}window.history.replaceState(m);return k},e=function(){window.history.forward();return k},d=function(){window.history.back();return k},b=function(m){window.history.go(m);return k},c=function(){return window.history.state},l=function(){return window.history.length},g=function(){return _history.callbacks};k={push:h,modify:i,forward:e,back:d,go:b,data:c,size:l,callbacks:g};var f=function(m){if(!m||!m.originalEvent||!m.originalEvent.state){return}g().fire(m.originalEvent.state)};$(window).bind("popstate",f);return _history.instance=k};