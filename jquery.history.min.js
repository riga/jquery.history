/*!
 * jQuery History Plugin v0.2
 * https://github.com/riga/jquery.history
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _history={instance:null,callbacks:jQuery.Callbacks()};
jQuery.History=function(j,c){if(j&&(j.fire||jQuery.isFunction(j))){if(c||c===undefined){_history.callbacks.add(j.fire||j);}else{_history.callbacks=j.fire?j:jQuery.Callbacks().add(j);
}}if(_history.instance){return _history.instance;}var k,h=function(n,m){if(!jQuery.isPlainObject(n)){n=jQuery.extend(true,{url:n},m);}m=n;window.history.pushState(m,"",encodeURI(m.url));
g().fire(m);return k;},i=function(m,o,n){if(o||o===undefined){m=jQuery.extend(true,b(),m);}window.history.replaceState(m);if(n){g().fire(m);}return k;},f=function(){window.history.forward();
return k;},e=function(){window.history.back();return k;},d=function(m){window.history.go(m);return k;},b=function(){return window.history.state;},l=function(){return window.history.length;
},g=function(){return _history.callbacks;},a=function(m){if(!m||!m.originalEvent||!m.originalEvent.state){return;}g().fire(m.originalEvent.state);};$(window).on("popstate",a);
k={push:h,modify:i,forward:f,back:e,go:d,state:b,size:l};return _history.instance=k;};