/*!
 * jQuery History Plugin v0.3
 * https://github.com/riga/jquery.history
 *
 * Copyright 2013, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _history={instance:null,callbacks:jQuery.Callbacks()};
jQuery.History=function(c,o){if(c&&(c.fire||jQuery.isFunction(c))){if(o||o===undefined){_history.callbacks.add(c.fire||c);}else{_history.callbacks=c.fire?c:jQuery.Callbacks().add(c);
}}if(_history.instance){return _history.instance;}var l,p=true,e=function(t,s,u){if(!jQuery.isPlainObject(t)){t=jQuery.extend(true,{url:t},s);}s=t;window.history.pushState(s,"",encodeURI(s.url));
if(u){f().fire(s);}return l;},r=function(s,u,t){if(u||u===undefined){s=jQuery.extend(true,b(),s);}window.history.replaceState(s);if(t){f().fire(s);}return l;
},h=function(){window.history.forward();return l;},m=function(){window.history.back();return l;},n=function(s){window.history.go(s);return l;},b=function(){return window.history.state;
},j=function(){return window.history.length;},i=function(){p=true;return l;},a=function(){p=false;return l;},g=function(){return p;},q=function(){return f().fired();
},k=function(){var s=jQuery.Deferred();f().add(s.resolve);return s.promise();},f=function(){return _history.callbacks;},d=function(s){if(!g()||!s||!s.originalEvent){return;
}f().fire(s.originalEvent.state);};$(window).load(function(){window.setTimeout(function(){$(window).on("popstate",d);},0);});l={push:e,modify:r,forward:h,back:m,go:n,state:b,size:j,enable:i,disable:a,enabled:g,fired:q,promise:k};
return _history.instance=l;};