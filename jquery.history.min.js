/*!
 * jQuery History Plugin v0.2
 * https://github.com/riga/jquery.history
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _history={instance:null,callbacks:jQuery.Callbacks()};jQuery.History=function(j,b){if(j&&(j.fire||jQuery.isFunction(j))){if(b===undefined||b){_history.callbacks.add(j.fire||j)}else{_history.callbacks=j.fire?j:jQuery.Callbacks().add(j)}}if(_history.instance){return _history.instance}var k,h=function(n,m){if(!jQuery.isPlainObject(n)){n=jQuery.extend(true,{url:n},m)}m=n;window.history.pushState(m,"",encodeURI(m.url));g().fire(m);return k},i=function(m,n){if(n===undefined||n){m=jQuery.extend(true,a(),m)}window.history.replaceState(m);return k},e=function(){window.history.forward();return k},d=function(){window.history.back();return k},c=function(m){window.history.go(m);return k},a=function(){return window.history.state},l=function(){return window.history.length},g=function(){return _history.callbacks};k={push:h,modify:i,forward:e,back:d,go:c,state:a,size:l,callbacks:g};var f=function(m){if(!m||!m.originalEvent||!m.originalEvent.state){return}g().fire(m.originalEvent.state)};$(window).on("popstate",f);return _history.instance=k};