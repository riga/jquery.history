/*!
 * jQuery History Plugin v0.1
 * https://github.com/riga/jquery.History
 *
 * Copyright 2012, Marcel Rieger
 * Dual licensed under the MIT or GPL Version 3 licenses.
 * http://www.opensource.org/licenses/mit-license
 * http://www.opensource.org/licenses/GPL-3.0
 */
var _history={instance:null,data:{}};jQuery.History=function(){if(_history.instance){return _history.instance}var h,f=function(k,n,m){if(!jQuery.isPlainObject(k)){var j={url:k||"",callbacks:(n&&n.fire)?n:jQuery.Callbacks().add(n)};m=jQuery.extend(true,j,m)}var l=h.size();window.history.pushState(l,"",encodeURI(m.url));_history.data[l]=m;m.callbacks.fire(m);return h},g=function(j){jQuery.extend(true,h.data(),j);return h},d=function(){window.history.forward();return h},c=function(){window.history.back();return h},a=function(j){window.history.go(j);return h},b=function(){var j=window.history.state;return _history.data[j]},i=function(){return window.history.length};h={push:f,modify:g,forward:d,back:c,go:a,data:b,size:i};var e=function(l){if(!l||!l.originalEvent){return}var j=l.originalEvent.state;var k=_history.data[j];if(k&&k.callbacks&&k.callbacks.fire){k.callbacks.fire(k)}};$(window).bind("popstate",e);return _history.instance=h};